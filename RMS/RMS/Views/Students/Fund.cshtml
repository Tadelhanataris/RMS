@model RMS.Models.Project
@{
    ViewBag.Title = "Fund";
    Layout = "~/Views/Students/_Layout.cshtml";
}
@section Head {
    @Styles.Render("~/Content/fund")
}
@using(Html.BeginForm("Fund", "Students"))
{
    <div id="jfsyjl">
        <div class="row table-start">
            <div class="col-md-2 col">
                <p>项目名称</p>
            </div>
            <div class="col-md-10 col end">
                <p>@Html.DisplayFor(x=>x.projectName)</p>
            </div>
        </div>
        <div class="row">
            <div class="col-md-2 col">
                <p>项目编号</p>
            </div>
            <div class="col-md-3 col">
                <p>@Html.DisplayFor(x => x.projectNo)</p>
            </div>
            <div class="col-md-3 col">
                <p>研究起止时间</p>
            </div>
            <div class="col-md-4 col end">
                <p>@Html.DisplayFor(x => x.projectNo)//todo</p>
            </div>
        </div>
        <div class="row">
            <div class="col-md-2 col">
                <p>报帐日期</p>
            </div>
            <div class="col-md-8 col">
                <p>报账内容</p>
            </div>
            <div class="col-md-2 col end">
                <p style="margin-top: -1px">金额</p>
                <p style="margin-top: -11px;font-size: 12px">（单位：元）</p>
            </div>
        </div>
        @if (Model!=null&&Model.funduse != null)
        {
            foreach (var fund in Model.funduse)
            {
            <div class="row">
                <div class="col-md-2 col">
                    @Html.TextBoxFor(x => fund.time, new { @class = "form-control", type = "date" })
                </div>
                <div class="col-md-8 col">
                    @Html.TextBoxFor(x => fund.title, new { @class = "form-control" })
                </div>
                <div class="col-md-2 col end">
                    @Html.TextBoxFor(x => fund.money, new { @class = "form-control", type = "number" })
                </div>
            </div>
            }
        }
        <div class="row">
            <div class="col-md-12" style="margin-top: 10px;text-align: center">
                <button class="btn btn-default" type="button" id="tjxjl">添加一条新记录</button>
            </div>
        </div>
    </div>

    <div id="btn-container" style="text-align: center">
        <button type="submit" class="btn btn-default" style="width: 80px;">提交</button>
        <button type="reset" class="btn btn-danger" style="width: 80px;">重置</button>
        <button type="button" class="btn btn-primary" style="width: 80px;">打印</button>
    </div>
}

<script>
    $(window).load(function(){
        var i=@if (Model != null && Model.funduse != null)
        {@Model.funduse.Count()} else { var i = 1; @i };
        $('#tjxjl').click(function(){
            $('#tjxjl').parent().before("<div class='row'><div class='col-md-2 col'><input type='text' class='form-control' id='rq"+i+"'></div><div class='col-md-8 col'><input type='text' class='form-control' id='sy"+i+"'></div><div class='col-md-2 col end'><input type='text' class='form-control' id='je"+i+"'></div></div>"
            );
                i++;
            })
    });
</script>